{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

     <!--Font Awesome CSS-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

     <!--Bootstrap  CSS-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

     <!--Custom Stylesheets-->
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <link rel="stylesheet" href="{% static 'css/all.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/contact.css' %}" />
    <link rel="stylesheet" href="{% static 'css/about.us.css' %}" />



    <!--Corrected custom stylesheet link-->

 <!--Custom Styling for Bootstrap Dropdown Hover-->
    <style>
        .nav-item.dropdown:hover .dropdown-menu {
            display: block;
        }
    </style>
    <style>
        body {
            padding-top: 80px; /* Adjust this value to create space between fixed navbar and content */
        }
    </style>
    <style>
        .nav-item.dropdown .nav-link.dropdown-toggle {
            font-size: 14px; /* Adjust the font size as needed */
        }
    </style>

    <!-- jQuery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>


     <!--Bootstrap JavaScript dependencies-->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>

    <!-- Custom JavaScript-->
    <script src="{% static 'js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'js/all.min.js' %}"></script>
    <script src="{% static 'js/myscript.js' %}"></script>


    <title>Maazar.ma </title>
</head>
<body>
    <header>
        <!--Your navbar code here-->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
            <img src="{% static 'images/download (6).jpg' %}" alt="Your Logo" width="60" height="60" class="d-inline-block align-top">
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="{% url 'home'%}">Home</a>

                     <!-- Categories dropdown -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Categories
                            </a>
                            <ul class="dropdown-menu">
                                {% for category in categories %}
                                <li class="nav-item dropdown">
                                    <a class="dropdown-item" href="{% url 'list' category.id %}">{{ category.name }}</a>
                                </li>
                                {% endfor %}
                            </ul>
                            
                        </li>

      </li>

                            <li class="nav-item mx-2">
                                <a class="nav-link text-white" href="{% url 'about'%}">About Us</a>
                            </li>
                            <li class="nav-item mx-2">
                                <a class="nav-link text-white" href='{% url 'contact'%}'>Contact Us</a>
                            </li>
                    </ul>

                    <form class="d-flex" role="search" action="{% url 'search_results' %}" method="get">
                        <div class="input-group mx-5">
                            <input class="form-control me-0 mb-2" type="search" name="q" autocomplete="off"
                                placeholder="Search" aria-label="Search">
                            <button class="btn btn-outline-light mb-2" type="submit">
                                <i class="fas fa-search"></i> <!-- Font Awesome search icon -->
                            </button>
                        </div>
                    </form>

                    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
                    <link rel="stylesheet" href="{% static 'css/css.css' %}">
                </div>

                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item mx-2">
                        <a class="nav-link text-white" href="{% url 'view_cart' %}">
                            <i class="fas fa-shopping-cart"></i> <!-- Font Awesome shopping cart icon -->
                            <span class="badge rounded-pill" style="background-color: white; color: black;">{{ cart|length }}</span>

                        </a>
                    </li>
                    <li class="nav-item mx-2">
                        <a class="nav-link text-white" href="#">
                            <i class="fas fa-heart"></i> <!-- Font Awesome heart icon for Wishlist -->
                        </a>
                    </li>
                     <!-- User dropdown -->
                   <li class="nav-item dropdown">
    {% if user.is_authenticated %}
        <a class="nav-link dropdown-toggle" href="" id="userDropdown" role="button"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            {{ user.username }}
        </a>
        <div class="dropdown-menu" aria-labelledby="userDropdown">
            <a class="dropdown-item" href="{% url 'logout' %}">Log Out</a>
        </div>
    {% else %}
        <a class="nav-link dropdown-toggle" href="" id="userDropdown" role="button"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            User
        </a>
        <div class="dropdown-menu" aria-labelledby="userDropdown">
            <a class="dropdown-item" href="{% url 'register' %}">Sign Up</a>
            <a class="dropdown-item" href="{% url 'login' %}">Log In</a>
        </div>
    {% endif %}
</li>



    </header>

{% block banner-slider2 %}{% endblock banner-slider2 %}
{% block banner_slider %}{% endblock banner_slider %}
    <main class="container mt-4">
        <!-- Your main content goes here -->
        {% block content %}
        <h2>Main Content</h2>
        {% endblock %}
    </main>

    <footer class="navbar navbar-expand-lg navbar-dark bg-dark  d-flex justify-content-center align-items-center custom-footer-text">
        <!-- Your footer content -->
        <p style="color: white;">&copy; Copyright 2024. Developed by Douae</p>
    </footer>
</div>
<script>
    function fetchCartCount() {
        fetch('{% url "cart_count" %}')
            .then(response => response.json())
            .then(data => {
                // Update the cart count in the navbar
                document.getElementById('cart-count').innerText = data.cart_count;
            })
            .catch(error => {
                console.error('Error fetching cart count:', error);
            });
    }

    // Call fetchCartCount initially when the page loads
    fetchCartCount();

    // Call fetchCartCount every 5 seconds
    setInterval(fetchCartCount, 5000); // 5000 milliseconds = 5 seconds
</script>

</body>
</html>